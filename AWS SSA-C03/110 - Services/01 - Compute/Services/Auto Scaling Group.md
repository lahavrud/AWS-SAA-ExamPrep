שירות המנהל באופן אוטומטי אוסף של שרתי [[EC2]], במטרה להבטיח שהאפליקציה תמיד זמינה (High Availability) תוך אופטימיזציה של עלויות (Cost Efficiency).

## 1. שלושת מספרי היסוד (Capacity Settings)

בכל קבוצת ASG מגדירים שלושה פרמטרים מרכזיים:

- **Minimum Size:** מספר השרתים המינימלי שחייב לרוץ בכל רגע (גם אם אין עומס).
    
- **Maximum Size:** הגבול העליון של כמות השרתים (כדי למנוע חריגה בתקציב).
    
- **Desired Capacity:** מספר השרתים שה-ASG שואף להריץ כרגע.
    
    - _טיפ למבחן:_ אם לא נגדיר זאת, ברירת המחדל היא ה-Minimum.

---

## 2. הגדרת השרת ("How-To")

כדי שה-ASG ידע איזה שרת להקים, עלינו להגדיר **[[Launch Template]]**:

- מכיל את ה-[[AMI]], סוג השרת ([[EC2#^b63ede|Instance Types]]), ה-[[Security Groups]] וה-[[User Data]].
    
- _הערה:_ ה-Launch Template מחליף את ה-Launch Configuration הישן ותומך בגרסאות (Versioning).

---

## 3. מדיניות גדילה (Scaling Policies)

כאן נקבע "מתי" להוסיף או להסיר שרתים:

- **Target Tracking Scaling:** הכי פשוט ונפוץ. למשל: "תמיד תשמור על ממוצע של 40% CPU בקבוצה". ה-ASG יוסיף/יוריד שרתים כדי לעמוד ביעד.
    
- **Simple / Step Scaling:** הוספה/הסרה של שרתים לפי חוקים מוגדרים מראש. למשל: "אם ה-CPU מעל 70% למשך 2 דקות, תוסיף 2 שרתים".
    
- **Scheduled Scaling:** גדילה לפי זמן ידוע מראש. למשל: "ביום שישי ב-10:00 בבוקר (לפני הקניות של סוף השבוע), תעלה את ה-Desired ל-10".
    
- **Predictive Scaling:** שימוש ב-Machine Learning כדי לחזות עומסים עתידיים ולהתכונן מראש.

---

## 4. בריאות ושרידות (Health Checks)

ה-ASG דואג ל-**Self-Healing**:

- אם שרת "מת" (נכשל ב-EC2 Health Check), ה-ASG יחסל אותו ויקים חדש במקומו.
    
- **[[ELB]] Health Checks:** ניתן להגדיר שה-ASG יסתמך על בדיקות הבריאות של ה-Load Balancer. כך, אם האפליקציה עצמה תקועה (אפילו אם השרת עובד), ה-ASG יחליף את השרת.

---

## טיפים זהב למבחן

- **Regionality:** ה-ASG מוגדר ברמת ה-Region אך פועל לאורך מספר **Availability Zones**. אם AZ אחד קורס, ה-ASG יקים את השרתים ב-AZ אחר.
    
- **Cooldown Period:** זמן המתנה (בד"כ 300 שניות) לאחר פעולת Scaling, שבו ה-ASG לא מבצע שינויים נוספים כדי לאפשר למדדים להתייצב.
    
- **Termination Policy:** כברירת מחדל, כשה-ASG צריך לצמצם שרתים, הוא יחפש את ה-AZ עם הכי הרבה שרתים וימחק את השרת הכי ישן בו.
    
- **ASG + [[Spot Instances]]:** שילוב אידיאלי לחיסכון בעלויות. ניתן להגדיר ל-ASG להשתמש במיקס של On-Demand ו-Spot.